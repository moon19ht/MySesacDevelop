# 🛢️ SQL 개념 설명서

##### 🗓️ 2025.05.20
##### 📝 Writer : Moon19ht

---

## 📚 목차

- [🔚 마무리](#-마무리)
- [⏭️ 다음으로는...](#️-다음으로는)
- [⏮️ 이전 문서](./0514%20Python정리.md) [다음 문서 ⏭️](./0516%20SQL정리.md)

---

## 🔁 JOIN 복습 및 심화

### INNER JOIN
두 테이블 모두에 존재하는 일치하는 레코드 반환

```sql
SELECT e.name, d.dept_name
FROM employees e
INNER JOIN departments d ON e.dept_id = d.dept_id;
```

### LEFT JOIN
왼쪽 테이블의 모든 레코드 + 오른쪽 테이블과 일치하는 레코드

```sql
SELECT e.name, d.dept_name
FROM employees e
LEFT JOIN departments d ON e.dept_id = d.dept_id;
```

### RIGHT JOIN
오른쪽 테이블의 모든 레코드 + 왼쪽 테이블과 일치하는 레코드

```sql
SELECT e.name, d.dept_name
FROM employees e
RIGHT JOIN departments d ON e.dept_id = d.dept_id;
```

### FULL OUTER JOIN (MySQL에는 직접 없음 → UNION 사용)
```sql
SELECT e.name, d.dept_name
FROM employees e
LEFT JOIN departments d ON e.dept_id = d.dept_id
UNION
SELECT e.name, d.dept_name
FROM employees e
RIGHT JOIN departments d ON e.dept_id = d.dept_id;
```

---

## 🔗 UNION

두 SELECT 결과를 합침 (중복 제거)

```sql
SELECT name FROM employees
UNION
SELECT name FROM managers;
```

중복 포함하고 싶다면 `UNION ALL` 사용

```sql
SELECT name FROM employees
UNION ALL
SELECT name FROM managers;
```

---

## 📊 GROUP BY 심화

### 집계 함수 + 그룹 조건
```sql
SELECT dept_id, COUNT(*) AS total_employees
FROM employees
GROUP BY dept_id
HAVING COUNT(*) >= 3;
```

### 다중 그룹 기준
```sql
SELECT dept_id, job_title, AVG(salary)
FROM employees
GROUP BY dept_id, job_title;
```

---

## ❗ EXISTS

하위 쿼리의 결과 존재 여부에 따라 TRUE/FALSE 반환

```sql
SELECT name
FROM employees e
WHERE EXISTS (
  SELECT 1
  FROM departments d
  WHERE e.dept_id = d.dept_id AND d.dept_name = 'Sales'
);
```

---

## 🔁 ANY & ALL

### ANY
하위 쿼리 결과 중 하나라도 만족하면 TRUE

```sql
SELECT name
FROM employees
WHERE salary > ANY (SELECT salary FROM managers);
```

### ALL
하위 쿼리 결과를 모두 만족해야 TRUE

```sql
SELECT name
FROM employees
WHERE salary > ALL (SELECT salary FROM interns);
```

---

## 🔧 MySQL 내장 함수

### 문자열 함수
```sql
SELECT UPPER('mysql'), LOWER('MYSQL'), LENGTH('문자열');
```

### 수치 함수
```sql
SELECT ABS(-10), CEIL(3.2), FLOOR(3.8), ROUND(3.1415, 2);
```

### 날짜 함수
```sql
SELECT NOW(), CURDATE(), DATE_ADD(NOW(), INTERVAL 7 DAY);
```

### 기타 함수
```sql
SELECT IF(salary > 5000, '고소득', '저소득') FROM employees;
```

---

## 🛠️ CREATE, INSERT, DELETE

### CREATE TABLE
```sql
CREATE TABLE employees (
  id INT PRIMARY KEY,
  name VARCHAR(50),
  dept_id INT,
  salary DECIMAL(10,2),
  hire_date DATE
);
```

### INSERT INTO
```sql
INSERT INTO employees (id, name, dept_id, salary, hire_date)
VALUES (1, '홍길동', 101, 5500.00, '2024-01-01');
```

### DELETE
```sql
DELETE FROM employees
WHERE id = 1;
```
